<container
    xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd"
>
    <services>
        <!-- CLIENT BUILDER -->
        <service id="synerise_integration.api_client_builder_factory" class="Synerise\SyliusIntegrationPlugin\Api\ClientBuilderFactory">
            <argument type="service" id="logger" on-invalid="null" />

            <tag name="monolog.logger" channel="synerise"/>
        </service>
        <service id="synerise_integration.api_client_builder" class="Synerise\Sdk\Api\ClientBuilder">
            <argument type="service" id="synerise_integration.context.workspace" />
        </service>
        <!-- EVENT REQUEST HANDLER FACTORY -->
        <service id="synerise_integration.api.request_handler.event.request_handler_factory" class="Synerise\SyliusIntegrationPlugin\Api\EventRequestHandlerFactory">
            <argument type="service" id="synerise_integration.api_client_builder_factory" />
            <argument type="service" id="synerise_integration.channel_configuration_factory" />
            <argument type="service" id="synerise_integration.synchronization_configuration_factory" />
            <argument type="collection">
                <argument key="product.addToCart">Synerise\SyliusIntegrationPlugin\Api\RequestHandler\Event\AddedToCartRequestHandler</argument>
                <argument key="product.removeFromCart">Synerise\SyliusIntegrationPlugin\Api\RequestHandler\Event\RemovedFromCartRequestHandler</argument>
                <argument key="cart.status">Synerise\SyliusIntegrationPlugin\Api\RequestHandler\Event\CustomEventRequestHandler</argument>
                <argument key="client.login">Synerise\SyliusIntegrationPlugin\Api\RequestHandler\Event\LoginRequestHandler</argument>
                <argument key="client.logout">Synerise\SyliusIntegrationPlugin\Api\RequestHandler\Event\LogoutRequestHandler</argument>
                <argument key="client.register">Synerise\SyliusIntegrationPlugin\Api\RequestHandler\Event\RegisterRequestHandler</argument>
                <argument key="profile.update">Synerise\SyliusIntegrationPlugin\Api\RequestHandler\Resource\ProfileRequestHandler</argument>
                <argument key="transaction.charge">Synerise\SyliusIntegrationPlugin\Api\RequestHandler\Resource\TransactionRequestHandler</argument>
                <argument key="product.update">Synerise\SyliusIntegrationPlugin\Api\RequestHandler\Resource\AddItemRequestHandler</argument>
            </argument>
        </service>
        <!-- RESOURCE REQUEST HANDLERS -->
        <service id="synerise_integration.api.request_handler.batch.customer" class="Synerise\SyliusIntegrationPlugin\Api\RequestHandler\Resource\ProfileRequestHandler">
            <argument type="service" id="synerise_integration.api_client_builder_factory" />
            <argument type="service" id="synerise_integration.channel_configuration_factory" />
            <argument type="service" id="synerise_integration.synchronization_configuration_factory" />
        </service>
        <service id="synerise_integration.api.request_handler.batch.order" class="Synerise\SyliusIntegrationPlugin\Api\RequestHandler\Resource\TransactionRequestHandler">
            <argument type="service" id="synerise_integration.api_client_builder_factory" />
            <argument type="service" id="synerise_integration.channel_configuration_factory" />
            <argument type="service" id="synerise_integration.synchronization_configuration_factory" />
        </service>
        <service id="synerise_integration.api.request_handler.batch.product" class="Synerise\SyliusIntegrationPlugin\Api\RequestHandler\Resource\AddItemRequestHandler">
            <argument type="service" id="synerise_integration.api_client_builder_factory" />
            <argument type="service" id="synerise_integration.channel_configuration_factory" />
            <argument type="service" id="synerise_integration.synchronization_configuration_factory" />
        </service>
        <!-- EVENT REQUEST MAPPERS -->
        <service id="synerise_integration.api.request_mapper.event.cart_item_add" class="Synerise\SyliusIntegrationPlugin\Api\RequestMapper\Event\OrderItemAddToCartEventMapper">
            <argument type="service" id="event_dispatcher" />
        </service>
        <service id="synerise_integration.api.request_mapper.event.cart_item_remove" class="Synerise\SyliusIntegrationPlugin\Api\RequestMapper\Event\OrderItemRemoveToCartEventMapper">
            <argument type="service" id="event_dispatcher" />
        </service>
        <service id="synerise_integration.api.request_mapper.event.cart_status" class="Synerise\SyliusIntegrationPlugin\Api\RequestMapper\Event\OrderToCartStatusEventMapper">
            <argument type="service" id="event_dispatcher" />
        </service>
        <service id="synerise_integration.api.request_mapper.event.customer_logged_in" class="\Synerise\SyliusIntegrationPlugin\Api\RequestMapper\Event\CustomerToLoggedInEvent">
            <argument type="service" id="event_dispatcher" />
        </service>
        <service id="synerise_integration.api.request_mapper.event.customer_logged_out" class="\Synerise\SyliusIntegrationPlugin\Api\RequestMapper\Event\CustomerToLoggedOutEvent">
            <argument type="service" id="event_dispatcher" />
        </service>
        <service id="synerise_integration.api.request_mapper.event.customer_registered" class="Synerise\SyliusIntegrationPlugin\Api\RequestMapper\Event\CustomerToRegisteredEvent">
            <argument type="service" id="event_dispatcher" />
        </service>
        <service id="synerise_integration.api.request_mapper.event.order" class="Synerise\SyliusIntegrationPlugin\Api\RequestMapper\Resource\OrderToTransactionMapper">
            <argument type="service" id="synerise_integration.sdk.source_provider" />
        </service>
        <!-- RESOURCE REQUEST MAPPERS -->
        <service id="synerise_integration.api.request_mapper.resource.customer" class="Synerise\SyliusIntegrationPlugin\Api\RequestMapper\Resource\CustomerToProfileMapper" />
        <service id="synerise_integration.api.request_mapper.resource.order" class="Synerise\SyliusIntegrationPlugin\Api\RequestMapper\Resource\OrderToTransactionMapper" />
        <service id="synerise_integration.api.request_mapper.resource.product" class="Synerise\SyliusIntegrationPlugin\Api\RequestMapper\Resource\ProductToAddItemMapper">
            <argument type="service" id="synerise_integration.synchronization_configuration_factory" />
            <argument type="service" id="event_dispatcher" />
        </service>
    </services>
</container>
